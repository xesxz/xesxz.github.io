import{_ as o,o as e,c as t,b as s,d as p,a as c,e as a,r}from"./app.ace0dae9.js";const l={},i=c(`<h2 id="koa2" tabindex="-1"><a class="header-anchor" href="#koa2" aria-hidden="true">#</a> koa2</h2><p>https://koa.bootcss.com/</p><p>\u521B\u5EFA koa2 \u9879\u76EE</p><div class="language-javascript ext-js"><pre class="language-javascript"><code>cnpm i <span class="token operator">-</span>g koa<span class="token operator">-</span>generator <span class="token comment">//\u5168\u90E8\u5B89\u88C5koa-generator</span>
koa2 <span class="token operator">-</span>e koa2<span class="token operator">-</span>learn   <span class="token operator">==</span>\u4F7F\u7528ejs\u6A21\u677F\u5F15\u64CE  <span class="token comment">//\u521B\u5EFAkoa2\u9879\u76EE  koa2 project_name</span>
<span class="token constant">DEBUG</span><span class="token operator">=</span>koa2<span class="token operator">-</span>learn<span class="token operator">:</span><span class="token operator">*</span> npm start  <span class="token comment">//\u542F\u52A8\u9879\u76EE</span>
npm run dev  \u9700\u8981\u4FEE\u6539  <span class="token comment">//\u5F00\u53D1\u73AF\u5883\u542F\u52A8\u9879\u76EE</span>
cnpm i koa2<span class="token operator">-</span>cors <span class="token operator">-</span><span class="token constant">S</span>


</code></pre></div><p>\u8FDE\u63A5\u6570\u636E\u5E93</p><div class="language-javascript ext-js"><pre class="language-javascript"><code><span class="token number">1.</span> mongod <span class="token operator">--</span>dbpath<span class="token operator">=</span><span class="token operator">/</span>Users<span class="token operator">/</span>workspace<span class="token operator">/</span>mongodb<span class="token operator">/</span>db
<span class="token number">2.</span> redis<span class="token operator">-</span>server
<span class="token number">3.</span> robo
<span class="token number">4.</span> Npm run dev

</code></pre></div><p>TODO:\u8FDE\u63A5mysql</p><p>person.js</p><div class="language-javascript ext-js"><pre class="language-javascript"><code><span class="token keyword">const</span> mongoose <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;mongoose&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> personSchema <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">mongoose<span class="token punctuation">.</span>Schema</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> String<span class="token punctuation">,</span>
  <span class="token literal-property property">age</span><span class="token operator">:</span> Number<span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> mongoose<span class="token punctuation">.</span><span class="token function">model</span><span class="token punctuation">(</span><span class="token string">&quot;Person&quot;</span><span class="token punctuation">,</span> personSchema<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>config.js</p><div class="language-javascript ext-js"><pre class="language-javascript"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">dbs</span><span class="token operator">:</span> <span class="token string">&quot;mongodb://127.0.0.1:27017/dbs&quot;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>app.js</p><p>\u5F15\u5165</p><div class="language-javascript ext-js"><pre class="language-javascript"><code><span class="token keyword">const</span> mongoose <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;mongoose&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> dbConfig <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;./dbs/config&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>\u4F7F\u7528\u3001 \u8FDE\u63A5\u6570\u636E\u5E93</p><div class="language-javascript ext-js"><pre class="language-javascript"><code>mongoose<span class="token punctuation">.</span><span class="token function">connect</span><span class="token punctuation">(</span>dbConfig<span class="token punctuation">.</span>dbs<span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">useNewUrlParser</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>\u5BFC\u5165\u6570\u636E</p><div class="language-javascript ext-js"><pre class="language-javascript"><code>mongoimport <span class="token operator">-</span>d test <span class="token operator">-</span>c area areas<span class="token punctuation">.</span>dat

</code></pre></div><p>\u6D4B\u8BD5\u63A5\u53E3</p><div class="language-javascript ext-js"><pre class="language-javascript"><code>curl <span class="token operator">-</span>d <span class="token string">&#39;name=lilei&amp;age=27&#39;</span> <span class="token literal-property property">http</span><span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>localhost<span class="token operator">:</span><span class="token number">3000</span><span class="token operator">/</span>users<span class="token operator">/</span>addPerson

</code></pre></div><p>redis</p><p>\u7F13\u5B58\u6570\u636E\u5E93</p><p>\u4ECE\u7F13\u5B58\u6570\u636E\u5E93\u8BFB\u6570\u636E\u5FEB</p><div class="language-javascript ext-js"><pre class="language-javascript"><code>koa <span class="token operator">-</span> generic <span class="token operator">-</span> session<span class="token punctuation">;</span>
koa <span class="token operator">-</span> redis<span class="token punctuation">;</span>
</code></pre></div><p>\u4F7F\u7528</p><div class="language-javascript ext-js"><pre class="language-javascript"><code><span class="token keyword">const</span> session <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;koa-generic-session&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> Redis <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;koa-redis&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//\u8FD9\u4E2A\u662F\u670D\u52A1\u5668\u7AEF\u628Asession\u79CD\u5728cookie\u4E2D,\u76EE\u7684\u662F\u533A\u5206\u4E0D\u540C\u7528\u6237</span>
</code></pre></div><div class="language-javascript ext-js"><pre class="language-javascript"><code>redis<span class="token operator">-</span>cli
keys <span class="token operator">*</span>

</code></pre></div><p>vue \u670D\u52A1\u7AEF\u6E32\u67D3 nuxt</p><div class="language-javascript ext-js"><pre class="language-javascript"><code>npx create<span class="token operator">-</span>nuxt<span class="token operator">-</span>app mt<span class="token operator">-</span>app

</code></pre></div><p>nuxt</p><div class="language-javascript ext-js"><pre class="language-javascript"><code>cnpm i koa<span class="token operator">-</span>router koa<span class="token operator">-</span>redis nodemailer

</code></pre></div><div class="language-javascript ext-js"><pre class="language-javascript"><code>mongoimport <span class="token operator">--</span>db test <span class="token operator">--</span>collection user <span class="token operator">--</span>file <span class="token operator">/</span>Users<span class="token operator">/</span>workspace<span class="token operator">/</span>Downloads<span class="token operator">/</span>response<span class="token punctuation">.</span>json

</code></pre></div><p>node \u6587\u4EF6\u4E0A\u4F20</p><p>\u6211\u67E5\u4E86\u4E00\u4E0B\u8D44\u6599\uFF0C\u53D1\u73B0\u53EF\u4EE5\u5B9E\u73B0\u6587\u4EF6\u4E0A\u4F20\u7684\u4E2D\u95F4\u4EF6\u6709 3 \u4E2A\uFF0C\u9009\u62E9\u5176\u4E2D\u4E00\u4E2A\u5C31\u53EF\u4EE5\u4E86\uFF1A</p><p>1\uFF09koa-body</p><p>2\uFF09busboy</p><p>3\uFF09koa-multer</p><p>4\uFF09koa-bodyparser \uFF08\u53EA\u652F\u6301json\u548Cform\u7C7B\u578B\u7684\u8BF7\u6C42 \u5C06\u89E3\u6790\u540E\u7684\u6570\u636E\u653E\u5728ctx.request.body\u5C5E\u6027\u4E2D\uFF09</p><p>\u5173\u4E8E\u4EE5\u4E0A\u4E09\u79CD\u4E2D\u95F4\u4EF6\u7684\u5DEE\u5F02\u53EF\u4EE5\u81EA\u884C\u7F51\u4E0A\u67E5\u8D44\u6599\uFF0C\u8FD9\u91CC\u6211\u9009\u62E9\u6BD4\u8F83\u987A\u773C\u7684 koa-body\uFF0C\u5B9E\u7528\u7B80\u5355\u3002</p><h2 id="express" tabindex="-1"><a class="header-anchor" href="#express" aria-hidden="true">#</a> express</h2>`,40),k={href:"https://www.expressjs.com.cn/starter/generator.html",target:"_blank",rel:"noopener noreferrer"},u=a("\u5FEB\u901F\u521B\u5EFA\u4E00\u4E2A express \u9879\u76EE"),d={href:"https://www.cnblogs.com/zhoulifeng/p/10197816.html",target:"_blank",rel:"noopener noreferrer"},g=a("\u4F7F\u7528 node \u548C express+mongodb \u5B9E\u73B0\u6570\u636E\u589E\u5220\u6539\u529F\u80FD"),m=s("h2",{id:"mongod-redis",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#mongod-redis","aria-hidden":"true"},"#"),a(" mongod-redis")],-1),v=s("div",{class:"language-text ext-text"},[s("pre",{class:"language-text"},[s("code",null,`1. mongod --dbpath=/Users/workspace/mongodb/db
2. redis-server
3. robo
4. Npm run dev
`)])],-1);function j(h,x){const n=r("ExternalLinkIcon");return e(),t("div",null,[i,s("p",null,[s("a",k,[u,p(n)])]),s("p",null,[s("a",d,[g,p(n)])]),m,v])}var _=o(l,[["render",j],["__file","koa2-express-mongod-redis.html.vue"]]);export{_ as default};
